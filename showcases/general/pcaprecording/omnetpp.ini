[Config PcapRecording]
sim-time-limit = 10s
network = PcapRecordingShowcase

# traffic settings
*.host1.numApps = 1
*.host1.app[0].typename = "UdpBasicApp"
*.host1.app[*].destAddresses = "host2"
*.host1.app[*].destPort = 1000
*.host1.app[*].localPort = 1000
*.host1.app[*].messageLength = 1000Byte
*.host1.app[*].sendInterval = 2ms

*.host2.numApps = 1
*.host2.app[0].typename = "UdpSink"
*.host2.app[*].localPort = 1000

*.ethHost1.numApps = 2
*.ethHost1.app[0].typename = "TcpSessionApp"
*.ethHost1.app[0].dataTransferMode = "bytestream"
*.ethHost1.app[0].connectAddress = "ethHost2"
*.ethHost1.app[0].tOpen = 10ms
*.ethHost1.app[0].tSend = 10ms
*.ethHost1.app[1].typename = "PingApp"
*.ethHost1.app[1].destAddr = "ethHost2"
*.ethHost1.app[1].startTime = 0s
*.ethHost1.app[1].sendInterval = 5ms

*.ethHost2.numApps = 1
*.ethHost2.app[0].typename = "TcpSinkApp"

# misc settings
**.checksumMode = "computed"
**.fcsMode = "computed"
*.host*.wlan[*].bitrate = 54Mbps

# pcap recorder settings
*.host1.numPcapRecorders = 1
*.host1.pcapRecorder[0].pcapFile = "results/host1.80211.pcap"

*.host2.numPcapRecorders = 1
*.host2.pcapRecorder[0].pcapFile = "results/host2.arp.pcap"
*.host2.pcapRecorder[0].packetFilter = expr(has(ArpPacket))

*.ethHost1.numPcapRecorders = 1
*.ethHost1.pcapRecorder[0].pcapFile = "results/ethHost1.eth.pcap"

*.router1.numPcapRecorders = 2
*.router1.pcapRecorder[0].pcapFile = "results/router1.ppp.pcap"
*.router1.pcapRecorder[0].moduleNamePatterns = "ppp[0]"
*.router1.pcapRecorder[1].pcapFile = "results/router1.eth.pcap"
*.router1.pcapRecorder[1].moduleNamePatterns = "eth[0]"

*.router2.numPcapRecorders = 1
*.router2.pcapRecorder[0].moduleNamePatterns = "eth[0]"
*.router2.pcapRecorder[0].pcapFile = "results/router2.tcpdata.pcap"
*.router2.pcapRecorder[0].packetFilter = expr(has(TcpHeader) && has(Ipv4Header) && Ipv4Header.totalLengthField-Ipv4Header.headerLength-TcpHeader.headerLength > 0B)
# note:
# TCP packets don't have a payload length field; the payload length can be calculated as follows:
# IPv4 total length field - IPv4 header length field - TCP header header length field

*.ethHost2.numPcapRecorders = 1
*.ethHost2.pcapRecorder[0].pcapFile = "results/ethHost2.ip.pcap"
*.ethHost2.pcapRecorder[0].dumpProtocols = "ipv4"

**.pcapRecorder[*].alwaysFlush = true

# visualizer settings
*.visualizer.numDataLinkVisualizers = 2
*.visualizer.numInterfaceTableVisualizers = 2
*.visualizer.dataLinkVisualizer[0].displayLinks = true
*.visualizer.dataLinkVisualizer[0].packetFilter = "not *ping*"
*.visualizer.physicalLinkVisualizer[*].displayLinks = true
*.visualizer.interfaceTableVisualizer[0].displayInterfaceTables = true
*.visualizer.interfaceTableVisualizer[0].format = "%N"
*.visualizer.interfaceTableVisualizer[1].displayInterfaceTables = true
*.visualizer.interfaceTableVisualizer[1].format = "%a"
*.visualizer.interfaceTableVisualizer[1].displayWiredInterfacesAtConnections = false
*.visualizer.transportConnectionVisualizer[*].displayTransportConnections = true
*.visualizer.dataLinkVisualizer[1].displayLinks = true
*.visualizer.dataLinkVisualizer[1].packetFilter = "*ping*"
*.visualizer.dataLinkVisualizer[1].lineColor = "red"
*.visualizer.infoVisualizer[*].modules = "*.*.pcapRecorder[*]"
*.visualizer.infoVisualizer[*].format = "%t"

