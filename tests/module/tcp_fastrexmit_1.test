%description:
Test Fast Retransmission: 3rd duplicate ACK should trigger resend before
retransmission timer expires

%inifile: omnetpp.ini
[General]
ned-path = .;../../../../src;../../lib

#omnetpp 5.0 - 5.1 compatibility:
eventlog-file = "${resultdir}/${configname}-${runnumber}.elog"
output-scalar-file = "${resultdir}/${configname}-${runnumber}.sca"
output-vector-file = "${resultdir}/${configname}-${runnumber}.vec"
snapshot-file = "${resultdir}/${configname}-${runnumber}.sna"

cmdenv-event-banners=false
cmdenv-express-mode=false

*.testing=true

####cmdenv-log-prefix=""
*.tcptester.cmdenv-log-level=DEBUG
**.cmdenv-log-level=OFF

*.cli_app.tSend=1s
*.cli_app.sendBytes=32768B # 32 1024-byte segments

*.tcptester.script="a12 delete"  # drop a segment to force fast rexmit

include ../../lib/defaults.ini

%contains: stdout
[1.001 A003] A.1000 > B.2000: A 1:1025(1024) ack 501 win 16384
[1.203 B002] A.1000 < B.2000: A ack 1025 win 16384
[1.205 A004] A.1000 > B.2000: A 1025:2049(1024) ack 501 win 16384
[1.205 A005] A.1000 > B.2000: A 2049:3073(1024) ack 501 win 16384
[1.207 B003] A.1000 < B.2000: A ack 3073 win 16384
[1.209 A006] A.1000 > B.2000: A 3073:4097(1024) ack 501 win 16384
[1.209 A007] A.1000 > B.2000: A 4097:5121(1024) ack 501 win 16384
[1.209 A008] A.1000 > B.2000: A 5121:6145(1024) ack 501 win 16384
[1.211 B004] A.1000 < B.2000: A ack 5121 win 16384
[1.213 A009] A.1000 > B.2000: A 6145:7169(1024) ack 501 win 16384
[1.213 A010] A.1000 > B.2000: A 7169:8193(1024) ack 501 win 16384
[1.213 A011] A.1000 > B.2000: A 8193:9217(1024) ack 501 win 16384
[1.215 B005] A.1000 < B.2000: A ack 7169 win 16384
[1.215 B006] A.1000 < B.2000: A ack 9217 win 16384
[1.217 A012] A.1000 > B.2000: A 9217:10241(1024) ack 501 win 16384 # deleting
[1.217 A013] A.1000 > B.2000: A 10241:11265(1024) ack 501 win 16384
[1.217 A014] A.1000 > B.2000: A 11265:12289(1024) ack 501 win 16384
[1.217 A015] A.1000 > B.2000: A 12289:13313(1024) ack 501 win 16384
[1.217 A016] A.1000 > B.2000: A 13313:14337(1024) ack 501 win 16384
[1.217 A017] A.1000 > B.2000: A 14337:15361(1024) ack 501 win 16384
[1.219 B007] A.1000 < B.2000: A ack 9217 win 16384
[1.219 B008] A.1000 < B.2000: A ack 9217 win 16384
[1.219 B009] A.1000 < B.2000: A ack 9217 win 16384
[1.219 B010] A.1000 < B.2000: A ack 9217 win 16384
[1.219 B011] A.1000 < B.2000: A ack 9217 win 16384
[1.221 A018] A.1000 > B.2000: A 9217:10241(1024) ack 501 win 16384
[1.221 A019] A.1000 > B.2000: A 15361:16385(1024) ack 501 win 16384
[1.221 A020] A.1000 > B.2000: A 16385:17409(1024) ack 501 win 16384
[1.223 B012] A.1000 < B.2000: A ack 16385 win 16384
[1.225 A021] A.1000 > B.2000: A 17409:18433(1024) ack 501 win 16384
[1.225 A022] A.1000 > B.2000: A 18433:19457(1024) ack 501 win 16384
[1.227 B013] A.1000 < B.2000: A ack 18433 win 16384
[1.229 A023] A.1000 > B.2000: A 19457:20481(1024) ack 501 win 16384
[1.229 A024] A.1000 > B.2000: A 20481:21505(1024) ack 501 win 16384
[1.231 B014] A.1000 < B.2000: A ack 20481 win 16384
[1.233 A025] A.1000 > B.2000: A 21505:22529(1024) ack 501 win 16384
[1.233 A026] A.1000 > B.2000: A 22529:23553(1024) ack 501 win 16384
[1.235 B015] A.1000 < B.2000: A ack 22529 win 16384
[1.237 A027] A.1000 > B.2000: A 23553:24577(1024) ack 501 win 16384
[1.237 A028] A.1000 > B.2000: A 24577:25601(1024) ack 501 win 16384
[1.239 B016] A.1000 < B.2000: A ack 24577 win 16384
[1.241 A029] A.1000 > B.2000: A 25601:26625(1024) ack 501 win 16384
[1.241 A030] A.1000 > B.2000: A 26625:27649(1024) ack 501 win 16384
[1.241 A031] A.1000 > B.2000: A 27649:28673(1024) ack 501 win 16384
[1.243 B017] A.1000 < B.2000: A ack 26625 win 16384
[1.243 B018] A.1000 < B.2000: A ack 28673 win 16384
[1.245 A032] A.1000 > B.2000: A 28673:29697(1024) ack 501 win 16384
[1.245 A033] A.1000 > B.2000: A 29697:30721(1024) ack 501 win 16384
[1.245 A034] A.1000 > B.2000: A 30721:31745(1024) ack 501 win 16384
[1.245 A035] A.1000 > B.2000: A 31745:32769(1024) ack 501 win 16384
[1.247 B019] A.1000 < B.2000: A ack 30721 win 16384
[1.247 B020] A.1000 < B.2000: A ack 32769 win 16384

%contains: stdout
[1.248] tcpdump finished, A:35 B:20 segments

%#--------------------------------------------------------------------------------------------------------------
%not-contains: stdout
undisposed object:
%not-contains: stdout
-- check module destructor
%#--------------------------------------------------------------------------------------------------------------
