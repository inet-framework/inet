[General]
abstract = true
network = FramePreemptionShowcase
sim-time-limit = 10ms
record-eventlog = true
result-dir = "results/wip"

# configure Ethernet speed
*.*.eth[0].bitrate = 100Mbps

# configure source applications
*.source.numApps = 2
*.source.app[*].typename = "UdpSourceApp"
*.source.app[0].source.packetNameFormat = "best-effort-%c"
*.source.app[1].source.packetNameFormat = "high-priority-%c"
*.source.app[*].tagger.typename = "PacketTagger"
*.source.app[0].tagger.vlanId = 1
*.source.app[1].tagger.vlanId = 0
*.source.app[*].io.destAddress = "destination"
*.source.app[0].io.destPort = 1000
*.source.app[1].io.destPort = 1001

# configure best-effort traffic ~96Mbps
*.source.app[0].source.packetLength = 1200B
*.source.app[0].source.productionInterval = truncnormal(100us, 50us)
*.source.app[0].source.initialProductionOffset = 5us

# configure high-priority traffic ~9.6Mbps
*.source.app[1].source.packetLength = 120B
*.source.app[1].source.productionInterval = truncnormal(1ms, 500us)

# configure destination applications
*.destination.numApps = 2
*.destination.app[*].typename = "UdpSinkApp"
*.destination.app[0].io.localPort = 1000
*.destination.app[1].io.localPort = 1001

[PriorityQueueing]
description = "High-priority frames are transmitted before best-effort frames"

# configure priority queueing
**.macLayer.queue.typename = "PriorityQueue"
**.macLayer.queue.numQueues = 2
**.macLayer.queue.queue[*].packetCapacity = 4
**.macLayer.queue.queue*.typename = "DropTailQueue"
**.macLayer.queue.classifier.classifierClass = "inet::PacketVlanReqClassifier"

[FramePreemption]
description = "Transmission of best-effort frames are preempted by high-priority frames"

# configure Ethernet frame preemption
*.*.eth[0].macLayer.typename = "EthernetPreemptingMacLayer"
*.*.eth[0].phyLayer.typename = "EthernetPreemptingPhyLayer"

# configure MAC nested sublayer queueing
*.source.eth[0].macLayer.queue.typename = ""
*.source.eth[0].macLayer.*MacLayer.queue.typename = "DropTailQueue"
*.source.eth[0].macLayer.*MacLayer.queue.packetCapacity = 4
