Generating Tokens Based on Received Signals
===========================================

The :ned:`SignalBasedTokenGenerator` module generates tokens in a token-based server when receiving signals.

In this example network, packets are generated by a passive packet source (:ned:`PassivePacketSource`).
A token-based server (:ned:`TokenBasedServer`) pops packets from a passive packet source
(:ned:`PassivePacketSource`) when it has tokens, and pushes them into a passive packet sink (:ned:`PassivePacketSink`).
The token generator is subscribed to the ``packetDropped`` signal of the consumer,
and generates a token whenever the signal is emitted. The provider has a configured providing interval of 1s.
Setting a providing interval is necessary because otherwise (if the provider could generate packets at any time),
an infinite amount of packets would be generated and dropped in zero simulation time, resulting in an error.

.. figure:: media/SignalBasedTokenGenerator.png
   :align: center

.. literalinclude:: ../QueueingTutorial.ned
   :start-at: network SignalBasedTokenGenerator
   :end-before: //----
   :language: ned

.. literalinclude:: ../omnetpp.ini
   :start-at: Config SignalBasedTokenGenerator
   :end-at: initialNumTokens
   :language: ini
