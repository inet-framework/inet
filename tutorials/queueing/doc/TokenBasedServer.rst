Token-Based Server
==================

The :ned:`TokenBasedServer` module pops packets from a passive source and processes them
when it has enough tokens.
A configured amount of tokens is lost when a packet is processed.
The module processes packets in zero simulation time, and pushes them onto the packet consumer
connected to its output.
The module acquires tokens from token generator modules.

In this step, packets are generated by a passive packet source (:ned:`PassivePacketSource`).
The packets are popped by the :ned:`TokenBasedServer` module. There are no token generators
in this network, but the server has 10 initial tokens to process packets; the tokens eventually run out.
Packets are consumed by a passive packet sink (:ned:`PassivePacketSink`).

.. figure:: media/TokenBasedServer.png
   :width: 80%
   :align: center

.. literalinclude:: ../QueueingTutorial.ned
   :start-at: network TokenBasedServerTutorialStep
   :end-before: //----
   :language: ned

.. literalinclude:: ../omnetpp.ini
   :start-at: Config TokenBasedServer
   :end-at: initialNumTokens
   :language: ini
