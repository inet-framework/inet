INET 4.0 TODOs
==============

The new INET 4.0 release SHOULD include changes in the following categories:
 - API breaking changes (e.g. renames, public API changes, etc.)

The new INET 4.0 release NEED NOT include changes in the following categories:
 - additive changes (new APIs)
 - behavior improvements
 - documentation
 - code style
 - performance optimizations

The new INET 4.0 release contains changes related to three main topics:
 
 - Network Node Architecture
 - Packet Tags
 - Flat Packet
 
Additionally, all other changes that are backward incompatible but easy to do
should be included in INET 4.0.

SHOULD:
 - add test and check for std::dynamic_pointer_cast<Subclass1>(chunk->peek<Subclass1>()) != nullptr always holds when peek uses a variant type deserializer

 - revise and rename statistics to have a consistent naming scheme
 - fix mobility non-determinism caused by interpolation from last position during animation
 - validate Rotation, Quaternion, EulerAngles against each other and documentation
 - validate positioning and orientation IMobility, PhysicalEnvironment, ObstacleLoss
 - cSocketRTScheduler refactoring for multiple sockets bound to interfaces
 - fix MAC address filtering TODO in RadioMedium

NEED NOT:
 - add L2 sockets: EthernetSocket bound to EtherType, LlcSocket bound to SSAP, DSAP, add Ieee80211Socket bound unconditionally
 - solve dynamic node creation and address resolution in applications
 - don't subclass APSK medium and such with other specific radios, think of APSK radio as yet another specific conceptual radio
 - generalize shutdown, startup, crash operations to applications, protocols, interfaces, etc. (NodeShutdownOperation -> ShutdownOperation, NodeStatus -> OperationalStatus?)
 - add antenna directional selectivity visualizer
 - separate Euclidean and geographic mobilities
 - move extra functions that doesn't really belong to L3AddressResolver (e.g. findInterfaceTableOf, findIPv4RoutingTableOf)
 - revise protocol base class hierarchy (e.g. LayeredProtocolBase vs IPv4 base class, etc.)
 - revise protocol header class hierarchy (e.g. avoid unnecessary interfaces)
 - revise NED network node module hierarchy (e.g. MPLS nodes)
 - compare performance with INET 3.x branch and optimize if a lot of worse
 - use m instead of double in Coord?
 - add meaningful display strings to at least the top level submodules of network nodes
 - replace functionality of GenericAppMsg with chunk tags, or better yet get rid of it altogether!
 - use shared pointers for transmissions/receptions, etc. because the gui copies packets in the packet log and inspects them later
 - eliminate all KLUDGES introduced by the 3 main infrastructure changes
 - revise physical layer error models wrt. how errors are represented
 - factor out physical layer analog domain representation into a separate parameter of transmissions
 - ethernet socket vs. ssap/dsap both in StandardHost and EtherHost
 - review all examples and check if they still do what is intended
 - add ChunkStack (lifo) similarly to how ChunkQueue (fifo) is implemented
 - add separate reusable application packet generators
 - rewrite serializers that use structure bit fields, this is undefined C++ behavior
 - revise all network node module base class hierarchy (e.g. mpls nodes)
 - replace cCompoundModule class in hosts/nodes with a specific classes such as StandardHost
   providing getInterfaceTable, getMobility, getIPv4NetworkLayer, etc. to avoid random code fragments with getSubmodule(".ipv4.routingTable")???
   but we should avoid having these classes for a random collections of utility functions!
 - add separate classes/functions for iterating over the network nodes in a network or
   finding a network node based on its mac address/ip address or finding the position of a network node, etc.
 - add missing node NED files for existing protocols (e.g. sensor nodes, IoT devices) 
 - update all NED and C++ documentation
 - nicely position submodules in compound modules, prepare for 2 info lines
 - extend main protocol modules (and all submodules) with 2 info lines above the submodule icon
 - avoid specifying module icon sizes by default, override icon size in submodules
 - sort includes alphabetically
 - pretty print white spaces

DONE:
 + rename CallbackInterface to ICallback in TcpSocket and SctpSocket
 + add ICallback and processMessage to UdpSocket
 + refactor all applications to use belongsToSocket and processMessage
 + solve dispatching to several UDP, TCP, SCTP sockets in a single application
 + rename GenericNetworkProtocol -> NextHopForwarding, GenericNetworkLayer -> NextHopNetworkLayer, GenericRoutingTable -> NextHopRoutingTable, GenericNetworkConfigurator -> NextHopNetworkConfigurator
 + replace ObjectLocatorNode with GeoTransform (PositionAttitudeTransform) to work with osgEarth 2.9
 + add missing interface NED files for all L2 protocols, BMacInterface
 + use degree instead of double in GeoCoord, use degree instead of double in EulerAngles
 + revise and rename signals to have a consistent naming scheme (e.g. NF_*)
 + port *all* protocols to the new packet API
 + consider renaming peekHeader to peekFront, peekTrailer to peekBack, etc. in Packet
 + review all @unit(deg) parameters to actually convert to radians in the represenation, and also review all usages (e.g. sin, cos, etc.)
 + replace omnet tags API with INET tags API, add separate Command class to support tags for non packet messages
 + implement all necessary omnetpp message compiler changes to avoid clutter in msg files
 + use InterfaceEntry class instead of cCompoundModule for the corresponding network interface (merge the two)
 + renamed IdealRadio to UnitDiskRadio, IdealMac to MaMac, BMacLayer to BerkeleyMac, LMacLayer to LightweightMac, CSMA to Ieee802154Mac, etc.
 + renamed all cc/h files to reflect the name of the class they are defining
 + renamed all upper case abbreviations to camel case (e.g. TCPConnection -> TcpConnection)
 + changed Packet/Buffer/Queue to automatically mark chunks as immutable
 + removing ethernet padding should be done in upper protocols if length is not present
 + revise and merge packetDrop signals, add details parameter (e.g. packetDropped)
 + replace std::make_shared<T>, std::dynamic_pointer_cast, std::static_pointer_cast, std::const_pointer_cast with makeShared<T>(), dynamicPtrCast<T>, dynamic_ptr_cast<T>, ...?
 + extract LLC from ethernet and 802.11
 + remove obsolete dataTransferMode from protocols (not applications)
 + simplify INetfilter interface by removing parameters other than the datagram
 + eliminate all control infos attached to packets
 + move CRC computation and verification from serializers to protocol modules (add missing ones)
