[General]
network = CompareNeuralNetworkErrorModels
sim-time-limit = 100s
result-dir = "results/Ieee80211Radio/${configname}/numNoiseSources=${numNoiseSources}/power=${power}/duration=${duration}"
output-scalar-file = "${resultdir}/repetition=${repetition}.sca"
cmdenv-output-file = "${resultdir}/repetition=${repetition}.out"
repeat = 2
num-rngs = 2
config-recording = essentials
**Neural**.cmdenv-log-level = trace
debug-on-errors=true
debugger-attach-on-error=true

**.param-recording = false
**.vector-recording = false
**.bin-recording = false
**.host[0].app[0].packetReceived:count.scalar-recording = true
**.scalar-recording = false

**.errorModel.rng-0 = 1

*.numHosts = 2
**.crcMode = "computed"
**.fcsMode = "computed"
**.arp.typename = "GlobalArp"

**.constraintAreaMinX = 0m
**.constraintAreaMinY = 0m
**.constraintAreaMinZ = 0m
**.constraintAreaMaxX = 1000m
**.constraintAreaMaxY = 400m
**.constraintAreaMaxZ = 0m

# mobility
*.host[*].mobility.typename = "StationaryMobility"
*.host[*].mobility.initFromDisplayString = false
*.host[0].mobility.initialX = 100m
*.host[1].mobility.initialX = 200m
*.host[*].mobility.initialY = 200m
*.host[*].mobility.initialZ = 0m

# app
*.host[1].numApps = 1
*.host[1].app[0].typename = "UdpBasicApp"
*.host[1].app[0].destAddresses = "host[0]"
*.host[1].app[0].destPort = 1000
*.host[1].app[0].messageLength = 8B
*.host[1].app[0].sendInterval = 1s

*.host[0].numApps = 1
*.host[0].app[0].typename = "UdpSink"
*.host[0].app[0].localPort = 1000

# medium
*.radioMedium.backgroundNoise.power = 1E-13W

# wlan
*.host[*].wlan[0].typename = "Ieee80211Interface"
*.host[*].wlan[0].mac.dcf.recoveryProcedure.shortRetryLimit = 0
*.host[*].wlan[0].mac.dcf.recoveryProcedure.longRetryLimit = 0
*.host[*].wlan[0].mgmt.typename = "Ieee80211MgmtAdhoc"
*.host[*].wlan[0].agent.typename = ""
*.host[*].wlan[0].radio.centerFrequency = 2.412GHz # TODO: should not be here
*.host[*].wlan[0].radio.bandwidth = 20MHz # TODO: should not be here
*.host[*].wlan[0].radio.transmitter.power = 10mW
*.host[*].wlan[0].radio.receiver.sensitivity = -109dBm
*.host[*].wlan[0].radio.receiver.energyDetection = -90dBm
*.host[*].wlan[0].radio.receiver.snirThreshold = -inf dB
*.host[*].wlan[0].radio.receiver.channelSpacing = 20MHz

# noise
*.numNoiseSources = ${numNoiseSources = 10 .. 20 step 2}
#*.numNoiseSources = ${numNoiseSources = 0 .. 20 step 1}
*.noiseSource[*].transmitter.centerFrequency = 2.412GHz
*.noiseSource[*].transmitter.bandwidth = 20MHz
#*.noiseSource[*].transmitter.power = ${power = 10}mW # ${power = 5 .. 50 step 5}uW
*.noiseSource[*].transmitter.power = ${power = 1 .. 10 step 1}mW
#*.noiseSource[*].transmitter.duration = ${duration = 4}us # ${duration = 0.2 .. 2 step 0.2}us
*.noiseSource[*].transmitter.duration = ${duration = 2 .. 16 step 2}us
*.noiseSource[*].startTime = 0s
*.noiseSource[*].jitterTime = uniform(0us, 48us)
*.noiseSource[*].repetitionTime = 1s

[Config DimensionalSymbollevel]
description = "symbol level simulation using dimensional analog model"

*.radioMedium.typename = "Ieee80211LayeredDimensionalRadioMedium"
*.host[*].wlan[0].radio.typename = "Ieee80211OfdmRadio"
*.noiseSource[*].transmitter.typename = "NoiseDimensionalTransmitter"

# transmitter
*.host[*].wlan[0].radio.transmitter.typename = "Ieee80211LayeredOfdmTransmitter"
*.host[*].wlan[0].radio.transmitter.levelOfDetail = "symbol"

# receiver
*.host[*].wlan[0].radio.receiver.typename = "Ieee80211LayeredOfdmReceiver"
*.host[*].wlan[0].radio.receiver.levelOfDetail = "symbol"
*.host[*].wlan[0].radio.receiver.errorModel.typename = "Ieee80211OfdmErrorModel"

[Config ScalarPacketlevel]
description = "packet level simulation using scalar analog model"

*.radioMedium.typename = "Ieee80211ScalarRadioMedium"
*.host[*].wlan[0].radio.typename = "Ieee80211ScalarRadio"
*.noiseSource[*].transmitter.typename = "NoiseScalarTransmitter"

[Config ScalarPacketlevelNeuralNetwork]
description = "packet level simulation using scalar analog model with neural network based error model"
extends = ScalarPacketlevel

*.host[*].wlan[0].radio.receiver.errorModel.typename = "NeuralNetworkErrorModel"
*.host[*].wlan[0].radio.receiver.errorModel.modelNameFormat = "%c_%r_%m_%M_%f_%b"
*.host[*].wlan[0].radio.receiver.errorModel.neuralNetworkModelFilenames = "models/Ieee80211Radio_24Mbps_Ieee80211Ofdm_Qam16_2.412GHz_20MHz.model"

[Config DimensionalPacketlevel]
description = "packet level simulation using dimensional analog model"

*.radioMedium.typename = "Ieee80211DimensionalRadioMedium"
*.host[*].wlan[0].radio.typename = "Ieee80211DimensionalRadio"
*.noiseSource[*].transmitter.typename = "NoiseDimensionalTransmitter"

[Config DimensionalPacketlevelNeuralNetwork]
description = "packet level simulation using scalar analog model with neural network based error model"
extends = DimensionalPacketlevel

*.host[*].wlan[0].radio.receiver.errorModel.typename = "NeuralNetworkErrorModel"
*.host[*].wlan[0].radio.receiver.errorModel.modelNameFormat = "%c_%r_%m_%M_%f_%b"
*.host[*].wlan[0].radio.receiver.errorModel.neuralNetworkModelFilenames = "models/Ieee80211Radio_24Mbps_Ieee80211Ofdm_Qam16_2.412GHz_20MHz.model"
