#
# Copyright (C) 2014 Kyeong Soo (Joseph) Kim. All rights reserved.
#
# This ini file provides architecture-specific configurations for an
# abstract model of shared access architectures -- like TDM-PONs or
# DOCSIS cable Internet access -- for the comparison study of
# next-generation network (NGN) access architectures.
#
# Note that [General] section, i.e., configurations common to all
# architectures including those of traffic models, is provided by
# "General.ini".
#


[General]
### [General] section providing configurations common to all network architectures
include General.ini


######################################################################################
### Architecture-Specific Settings (with 100-Mbps access line rate and 5 subscribers)
######################################################################################
[Config Base_N5]
### General
result-dir = results/mixed
#sim-time-limit = 240.5s	# 60s per each sub-period (of total 4); 0.5s added to handle the last 1-s period for throghput averaging
sim-time-limit = 20s	# for testing
warmup-period = 0s
#repeat = 10
repeat = 1	# for testing
**.thruputMeter.startTime = 0s
**.thruputMeter.measurementInterval = 10ms		# throughput measurement interval (default is 1s)
**.thruputMeter.*.vector-recording = true
**.olt.mac[0].queue.*.vector-recording = false	# for debugging of DRR/CSFQ algorithms
### Network configuraion
*.uni_rate = ${ur=100}Mbps			# rate of UNI
*.distribution_rate = ${dr=100}Mbps	# rate of distribution fiber
*.N = ${N=5}
**.olt.numSubscribers = ${N}
**.olt.mac[0].queue.numFlows = ${N}
**.olt.mac[0].queue.vids = "10 11 12 13 14"
### Server
**.server.numFtpSrvs = 0
**.server.numUdpApps = 5
**.server.udpApp[*].lineRate = ${br}Mbps	# backbone rate
# **.server.udpApp[*].messageLength = 950B	# resulting in 1000-byte Ethernet frame (i.e., UDP(8)+IP(20)+Ethernet(22))
#**.server.udpApp[*].messagePeriod = exponential(1s)
#**.server.udpApp[*].startTime = uniform(0s, 1s)
### TBM
**.olt.mac[0].meter[*].bucketSize = 10000000B	# 10 MB
**.olt.mac[0].meter[*].peakRate = ${br}Mbps		# It should be set to the backbone rate, not the distribution rate,
												# because we now use metering, not shaping.
# ### TCP
# **.tcp.windowScalingSupport = true	# enable window scaling support to provide throughput greater than 6Mbps
# **.tcp.advertisedWindow = 65535*100
# **.tcp.sackSupport = true
### Flows
# Common settings
**.olt.mac[0].meter[*].meanRate = 10Mbps
# Conformant Subscriber 1: UDP (periodic ON-OFF source) with SR=16Mbps & TGR=5Mbps
**.server.udpApp[0].destAddresses = "host[0]"
**.server.udpApp[0].startTime = 10s
**.server.udpApp[0].messageLength = ${ml=1, 2, 5, 10}*1000000B	# in MB
**.server.udpApp[0].messagePeriod = 2s	# TODO: update

# Non-Conformant Subscribers 2-5: UDP (CBR, no back-to-back packets) with SR=25Mbps & TGR=5Mbps
**.server.udpApp[1].destAddresses = "host[1]"
**.server.udpApp[2].destAddresses = "host[2]"
**.server.udpApp[3].destAddresses = "host[3]"
**.server.udpApp[4].destAddresses = "host[4]"
**.server.udpApp[1..4].startTime = uniform(0ms, 5ms)
**.server.udpApp[1..4].messageLength = 950B	# resulting in 1000-byte Ethernet frame (i.e., UDP(8)+IP(20)+Ethernet(22))
**.server.udpApp[1..4].messagePeriod = 0.32ms
#**.server.udpApp[1..4].messagePeriod = 100s # for testing

# [Config conceptual]
# extends = Base
# **.olt.mac[0].queueType = "DRRVLANQueue"	# OLT downstream queue
# #**.olt.mac[0].queue.fifoSize = 16000000B	# 16 MB
# **.olt.mac[0].queue.fifoSize = ${qs=1000000}B	# 1 MB
# **.olt.mac[0].queue.voqSize = ${qs}B
# **.olt.mac[0].queue.quanta = "1522 1522 1522 1522 3044 3044 3044 3044 4566 4566 4566 4566 6088 6088 6088 6088"
# #**.olt.mac[0].queue.quanta = "250 250 250 250 500 500 500 500 750 750 750 750 1000 1000 1000 1000"
# #**.olt.mac[0].queue.quanta = "100 100 100 100 200 200 200 200 300 300 300 300 400 400 400 400"

# [Config practical]
# extends = Base
# **.olt.mac[0].queueType = "DRRVLANQueue2"	# OLT downstream queue
# **.olt.mac[0].queue.voqSize = ${qs=1000000}B	# 1 MB
# **.olt.mac[0].queue.quanta = "1522 1522 1522 1522 3044 3044 3044 3044 4566 4566 4566 4566 6088 6088 6088 6088"
# #**.olt.mac[0].queue.quanta = "250 250 250 250 500 500 500 500 750 750 750 750 1000 1000 1000 1000"
# #**.olt.mac[0].queue.quanta = "100 100 100 100 200 200 200 200 300 300 300 300 400 400 400 400"

[Config practical_N5]
extends = Base_N5
**.olt.mac[0].queueType = "DRRVLANQueue2"	# OLT downstream queue
#**.olt.mac[0].queue.voqSize = ${qs=1000000}B	# 1 MB
**.olt.mac[0].queue.voqSize = ${qs=15000000}B	# 15 MB for testing
**.olt.mac[0].queue.quanta = "1522 1522 1522 1522 1522"
