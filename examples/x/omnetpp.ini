[General]
description = "Multi-network simulation with 5 WiFi networks and L-MAC TDMA backbone"
network = MultiNetworkSimulation
sim-time-limit = 600s
num-rngs = 5

# Network size parameter - set number of nodes per WiFi network
*.nodesPerNetwork = 200
**.mobility.rng-0 = 1
**.wlan[*].mac.rng-0 = 2
**.app[*].rng-0 = 3

# Global settings
**.hasStatus = true
**.constraintAreaMinZ = 0m
**.constraintAreaMaxZ = 0m

# Network configurator settings - only assign IP addresses, no routes
**.configurator.addStaticRoutes = false
**.configurator.addDefaultRoutes = false
**.configurator.addSubnetRoutes = false
**.configurator.optimizeRoutes = false

## ipv4routing table
**.netmaskRoutes = ""

# Gateway node icons - different icons for gateway nodes (node[0] of each network)
**.wifiNet1Host[0].display-string = "i=device/router,red"
**.wifiNet2Host[0].display-string = "i=device/router,blue"
**.wifiNet3Host[0].display-string = "i=device/router,green"
**.wifiNet4Host[0].display-string = "i=device/router,orange"
**.wifiNet5Host[0].display-string = "i=device/router,purple"

# ===============================================================================
# WiFi Network 1: wifiNet1Host[0..19] - Channel 1 (2.412 GHz)
# ===============================================================================
**.wifiNet1Host[*].mobility.constraintAreaMinX = 0m
**.wifiNet1Host[*].mobility.constraintAreaMinY = 0m
**.wifiNet1Host[*].mobility.constraintAreaMaxX = 500m
**.wifiNet1Host[*].mobility.constraintAreaMaxY = 500m

**.wifiNet1Host[*].wlan[0].radio.centerFrequency = 2.412GHz
**.wifiNet1Host[*].wlan[0].radio.radioMediumModule = "wifiRadioMedium"

# ===============================================================================
# WiFi Network 2: wifiNet2Host[0..19] - Channel 6 (2.437 GHz)
# ===============================================================================
**.wifiNet2Host[*].mobility.constraintAreaMinX = 600m
**.wifiNet2Host[*].mobility.constraintAreaMinY = 0m
**.wifiNet2Host[*].mobility.constraintAreaMaxX = 1100m
**.wifiNet2Host[*].mobility.constraintAreaMaxY = 500m

**.wifiNet2Host[*].wlan[0].radio.centerFrequency = 2.437GHz
**.wifiNet2Host[*].wlan[0].radio.radioMediumModule = "wifiRadioMedium"

# ===============================================================================
# WiFi Network 3: wifiNet3Host[0..19] - Channel 11 (2.462 GHz)
# ===============================================================================
**.wifiNet3Host[*].mobility.constraintAreaMinX = 1200m
**.wifiNet3Host[*].mobility.constraintAreaMinY = 0m
**.wifiNet3Host[*].mobility.constraintAreaMaxX = 1700m
**.wifiNet3Host[*].mobility.constraintAreaMaxY = 500m

**.wifiNet3Host[*].wlan[0].radio.centerFrequency = 2.462GHz
**.wifiNet3Host[*].wlan[0].radio.radioMediumModule = "wifiRadioMedium"

# ===============================================================================
# WiFi Network 4: wifiNet4Host[0..19] - Channel 2 (2.417 GHz)
# ===============================================================================
**.wifiNet4Host[*].mobility.constraintAreaMinX = 300m
**.wifiNet4Host[*].mobility.constraintAreaMinY = 600m
**.wifiNet4Host[*].mobility.constraintAreaMaxX = 800m
**.wifiNet4Host[*].mobility.constraintAreaMaxY = 1100m

**.wifiNet4Host[*].wlan[0].radio.centerFrequency = 2.417GHz
**.wifiNet4Host[*].wlan[0].radio.radioMediumModule = "wifiRadioMedium"

# ===============================================================================
# WiFi Network 5: wifiNet5Host[0..19] - Channel 7 (2.442 GHz)
# ===============================================================================
**.wifiNet5Host[*].mobility.constraintAreaMinX = 900m
**.wifiNet5Host[*].mobility.constraintAreaMinY = 600m
**.wifiNet5Host[*].mobility.constraintAreaMaxX = 1400m
**.wifiNet5Host[*].mobility.constraintAreaMaxY = 1100m

**.wifiNet5Host[*].wlan[0].radio.centerFrequency = 2.442GHz
**.wifiNet5Host[*].wlan[0].radio.radioMediumModule = "wifiRadioMedium"

# ===============================================================================
# L-MAC TDMA Configuration for Gateway Nodes (node[0] of each network)
# wlan[1] interface is used for TDMA backbone - 900 MHz
# ===============================================================================

# L-MAC TDMA Configuration for wlan[1] interface of gateway nodes
**.wifiNet1Host[0].wlan[1].typename = "LMacInterface"
**.wifiNet2Host[0].wlan[1].typename = "LMacInterface"
**.wifiNet3Host[0].wlan[1].typename = "LMacInterface"
**.wifiNet4Host[0].wlan[1].typename = "LMacInterface"
**.wifiNet5Host[0].wlan[1].typename = "LMacInterface"

# TDMA MAC Configuration
**.wifiNet*Host[0].wlan[1].mac.slotDuration = 20ms
**.wifiNet*Host[0].wlan[1].mac.numSlots = 5
**.wifiNet*Host[0].wlan[1].mac.bitrate = 1Mbps
**.wifiNet*Host[0].wlan[1].mac.headerLength = 10b
**.wifiNet*Host[0].wlan[1].mac.ctrlFrameLength = 10b

# Assign specific TDMA slots to each gateway (0-4)
**.wifiNet1Host[0].wlan[1].mac.defaultChannel = 0
**.wifiNet2Host[0].wlan[1].mac.defaultChannel = 1
**.wifiNet3Host[0].wlan[1].mac.defaultChannel = 2
**.wifiNet4Host[0].wlan[1].mac.defaultChannel = 3
**.wifiNet5Host[0].wlan[1].mac.defaultChannel = 4

# L-MAC Radio Configuration for wlan[1]
**.wifiNet*Host[0].wlan[1].radio.typename = "ApskScalarRadio"
**.wifiNet*Host[0].wlan[1].radio.centerFrequency = 900MHz
**.wifiNet*Host[0].wlan[1].radio.bandwidth = 2MHz
**.wifiNet*Host[0].wlan[1].radio.transmitter.power = 100mW
**.wifiNet*Host[0].wlan[1].radio.transmitter.bitrate = 1Mbps
**.wifiNet*Host[0].wlan[1].radio.transmitter.preambleDuration = 0s
**.wifiNet*Host[0].wlan[1].radio.transmitter.headerLength = 10b
**.wifiNet*Host[0].wlan[1].radio.receiver.sensitivity = -90dBm
**.wifiNet*Host[0].wlan[1].radio.receiver.snirThreshold = 4dB
**.wifiNet*Host[0].wlan[1].radio.receiver.energyDetection = -85dBm
**.wifiNet*Host[0].wlan[1].radio.radioMediumModule = "lmacRadioMedium"

# ===============================================================================
# WiFi 802.11b Configuration (wlan[0] interface for all WiFi nodes)
# ===============================================================================
**.wifiNet*Host[*].wlan[0].typename = "Ieee80211Interface"
**.wifiNet*Host[*].wlan[0].bitrate = 2Mbps
**.wifiNet*Host[*].wlan[0].mac.typename = "Ieee80211Mac"
**.wifiNet*Host[*].wlan[0].mac.dcf.channelAccess.cwMin = 31
**.wifiNet*Host[*].wlan[0].mac.dcf.channelAccess.cwMax = 1023

**.wifiNet*Host[*].wlan[0].radio.typename = "Ieee80211ScalarRadio"
**.wifiNet*Host[*].wlan[0].radio.transmitter.power = 20mW
**.wifiNet*Host[*].wlan[0].radio.transmitter.headerLength = 192b
**.wifiNet*Host[*].wlan[0].radio.receiver.sensitivity = -85dBm
**.wifiNet*Host[*].wlan[0].radio.receiver.snirThreshold = 4dB

# ===============================================================================
# Radio Medium Configuration
# ===============================================================================
# WiFi Radio Medium - IEEE 802.11 Scalar Configuration
**.wifiRadioMedium.analogModel.typename = "ScalarAnalogModel"
**.wifiRadioMedium.backgroundNoise.typename = "IsotropicScalarBackgroundNoise"
**.wifiRadioMedium.backgroundNoise.power = -110dBm
**.wifiRadioMedium.mediumLimitCache.typename = "MediumLimitCache"
**.wifiRadioMedium.neighborCache.typename = "GridNeighborCache"
**.wifiRadioMedium.neighborCache.cellSizeX = 100m
**.wifiRadioMedium.neighborCache.cellSizeY = 100m
**.wifiRadioMedium.neighborCache.cellSizeZ = 10m

# L-MAC Radio Medium - APSK Scalar Configuration  
**.lmacRadioMedium.analogModel.typename = "ScalarAnalogModel"
**.lmacRadioMedium.backgroundNoise.typename = "IsotropicScalarBackgroundNoise"
**.lmacRadioMedium.backgroundNoise.power = -110dBm
**.lmacRadioMedium.mediumLimitCache.typename = "MediumLimitCache"
**.lmacRadioMedium.neighborCache.typename = "GridNeighborCache"
**.lmacRadioMedium.neighborCache.cellSizeX = 200m
**.lmacRadioMedium.neighborCache.cellSizeY = 200m
**.lmacRadioMedium.neighborCache.cellSizeZ = 10m

# ===============================================================================
# Free Space Path Loss Model (stable alternative)
# ===============================================================================
**.wifiRadioMedium.pathLoss.typename = "FreeSpacePathLoss"
**.lmacRadioMedium.pathLoss.typename = "FreeSpacePathLoss"

# ===============================================================================
# Random Mobility Configuration
# ===============================================================================
**.wifiNet*Host[*].mobility.typename = "RandomWaypointMobility"
**.wifiNet*Host[*].mobility.speed = uniform(1mps, 5mps)
**.wifiNet*Host[*].mobility.waitTime = uniform(0s, 2s)
**.wifiNet*Host[*].mobility.updateInterval = 0.1s


# ===============================================================================
# AODV Routing Protocol Configuration for ManetRouter
# ===============================================================================
# Configure ManetRouter to use AODV routing application
**.wifiNet*Host[*].routingApp.typename = "Aodv"

# AODV protocol parameters
**.wifiNet*Host[*].routingApp.activeRouteTimeout = 3s
**.wifiNet*Host[*].routingApp.helloInterval = 1s
**.wifiNet*Host[*].routingApp.allowedHelloLoss = 2
**.wifiNet*Host[*].routingApp.netDiameter = 35
**.wifiNet*Host[*].routingApp.nodeTraversalTime = 0.04s

# Enable IP forwarding (required for AODV routing)
**.ipv4.ip.forwarding = true

# ===============================================================================
# Visualization Configuration
# ===============================================================================
# Enable routing table visualizer - arrows only, no annotations
**.visualizer.routingTableVisualizer.displayRoutingTables = false
**.visualizer.routingTableVisualizer.destinationFilter = "*"
**.visualizer.routingTableVisualizer.lineColor = "blue"
**.visualizer.routingTableVisualizer.lineStyle = "solid"
**.visualizer.routingTableVisualizer.lineWidth = 2
**.visualizer.routingTableVisualizer.displayLabels = false

# ===============================================================================
# CBR Traffic Generation (1 packet per 30s, random destinations)
# ===============================================================================
**.wifiNet*Host[*].numApps = 2
**.wifiNet*Host[*].app[0].typename = "UdpBasicApp"
**.wifiNet*Host[*].app[0].destAddresses = "wifiNet1Host[0] wifiNet2Host[0] wifiNet3Host[0] wifiNet4Host[0] wifiNet5Host[0] wifiNet1Host[10] wifiNet2Host[15] wifiNet3Host[5] wifiNet4Host[12] wifiNet5Host[8]"
**.wifiNet*Host[*].app[0].destPort = 5000
**.wifiNet*Host[*].app[0].messageLength = 512B
**.wifiNet*Host[*].app[0].sendInterval = exponential(30s)
**.wifiNet*Host[*].app[0].startTime = uniform(0s, 10s)

# UDP sink applications
**.wifiNet*Host[*].app[1].typename = "UdpSink"
**.wifiNet*Host[*].app[1].localPort = 5000
